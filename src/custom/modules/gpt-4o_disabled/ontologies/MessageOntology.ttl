@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix abi: <https://w3id.org/abi/> .
@prefix schema: <http://schema.org/> .
@prefix msg: <https://w3id.org/abi/gpt-4o/schema/> .
@prefix bfo: <http://purl.obolibrary.org/obo/BFO_> .
@prefix iao: <http://purl.obolibrary.org/obo/IAO_> .

# Ontology Declaration
msg: a owl:Ontology ;
    dcterms:title "GPT-4o Message Ontology"@en ;
    dcterms:description "Ontology for GPT-4o message formats and conversation structure"@en ;
    dcterms:creator "ABI System"@en ;
    owl:versionInfo "0.1.0" ;
    dcterms:license <https://opensource.org/licenses/MIT> .

# BFO Upper Ontology Integration
# Message as Information Content Entity (IAO:0000030)
msg:Message rdfs:subClassOf iao:0000030 .

# Role types as Information Entity 
msg:Role a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Message Role"@en ;
    rdfs:comment "The role of the entity sending a message"@en .

msg:SystemRole a owl:Class ;
    rdfs:subClassOf msg:Role ;
    rdfs:label "System Role"@en ;
    skos:prefLabel "system"@en .

msg:UserRole a owl:Class ;
    rdfs:subClassOf msg:Role ;
    rdfs:label "User Role"@en ;
    skos:prefLabel "user"@en .

msg:AssistantRole a owl:Class ;
    rdfs:subClassOf msg:Role ;
    rdfs:label "Assistant Role"@en ;
    skos:prefLabel "assistant"@en .

msg:ToolRole a owl:Class ;
    rdfs:subClassOf msg:Role ;
    rdfs:label "Tool Role"@en ;
    skos:prefLabel "tool"@en .

# Interface types
msg:Interface a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Interface"@en ;
    rdfs:comment "The interface through which a message was sent"@en .

msg:StreamlitInterface a owl:Class ;
    rdfs:subClassOf msg:Interface ;
    rdfs:label "Streamlit Interface"@en ;
    skos:prefLabel "streamlit"@en .

msg:TerminalInterface a owl:Class ;
    rdfs:subClassOf msg:Interface ;
    rdfs:label "Terminal Interface"@en ;
    skos:prefLabel "terminal"@en .

msg:NaasWorkspaceInterface a owl:Class ;
    rdfs:subClassOf msg:Interface ;
    rdfs:label "NaasWorkspace Interface"@en ;
    skos:prefLabel "naasworkspace"@en .

msg:ApiInterface a owl:Class ;
    rdfs:subClassOf msg:Interface ;
    rdfs:label "API Interface"@en ;
    skos:prefLabel "api"@en .

# Content types
msg:ContentType a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Content Type"@en ;
    rdfs:comment "The type of content in a message item"@en .

msg:TextContent a owl:Class ;
    rdfs:subClassOf msg:ContentType ;
    rdfs:label "Text Content"@en ;
    skos:prefLabel "text"@en .

msg:ImageContent a owl:Class ;
    rdfs:subClassOf msg:ContentType ;
    rdfs:label "Image Content"@en ;
    skos:prefLabel "image"@en .

msg:AudioContent a owl:Class ;
    rdfs:subClassOf msg:ContentType ;
    rdfs:label "Audio Content"@en ;
    skos:prefLabel "audio"@en .

msg:VideoContent a owl:Class ;
    rdfs:subClassOf msg:ContentType ;
    rdfs:label "Video Content"@en ;
    skos:prefLabel "video"@en .

msg:FileContent a owl:Class ;
    rdfs:subClassOf msg:ContentType ;
    rdfs:label "File Content"@en ;
    skos:prefLabel "file"@en .

# Main Classes
msg:Conversation a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Conversation"@en ;
    rdfs:comment "A conversation session between a user and the GPT-4o model"@en .

msg:Message a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Message"@en ;
    rdfs:comment "Abstract message class defining common properties across all message types"@en .

msg:SystemMessage a owl:Class ;
    rdfs:subClassOf msg:Message ;
    rdfs:label "System Message"@en ;
    rdfs:comment "Message sent by the system to set context or instructions"@en ;
    owl:equivalentClass [
        owl:intersectionOf (
            msg:Message 
            [ a owl:Restriction ;
              owl:onProperty msg:hasRole ;
              owl:hasValue msg:SystemRole
            ]
        )
    ] .

msg:UserMessage a owl:Class ;
    rdfs:subClassOf msg:Message ;
    rdfs:label "User Message"@en ;
    rdfs:comment "Message sent by the user"@en ;
    owl:equivalentClass [
        owl:intersectionOf (
            msg:Message 
            [ a owl:Restriction ;
              owl:onProperty msg:hasRole ;
              owl:hasValue msg:UserRole
            ]
        )
    ] .

msg:AssistantMessage a owl:Class ;
    rdfs:subClassOf msg:Message ;
    rdfs:label "Assistant Message"@en ;
    rdfs:comment "Message sent by the assistant"@en ;
    owl:equivalentClass [
        owl:intersectionOf (
            msg:Message 
            [ a owl:Restriction ;
              owl:onProperty msg:hasRole ;
              owl:hasValue msg:AssistantRole
            ]
        )
    ] .

msg:ToolMessage a owl:Class ;
    rdfs:subClassOf msg:Message ;
    rdfs:label "Tool Message"@en ;
    rdfs:comment "Message sent by a tool in response to a tool call"@en ;
    owl:equivalentClass [
        owl:intersectionOf (
            msg:Message 
            [ a owl:Restriction ;
              owl:onProperty msg:hasRole ;
              owl:hasValue msg:ToolRole
            ]
        )
    ] .

msg:ContentItem a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Content Item"@en ;
    rdfs:comment "Content item within a message"@en .

msg:ToolCall a owl:Class ;
    rdfs:subClassOf iao:0000030 ;
    rdfs:label "Tool Call"@en ;
    rdfs:comment "A call to a tool made by the assistant"@en .

# Object Properties
msg:hasMessage a owl:ObjectProperty ;
    rdfs:domain msg:Conversation ;
    rdfs:range msg:Message ;
    rdfs:label "has message"@en ;
    rdfs:comment "Links a conversation to its messages"@en .

msg:hasRole a owl:ObjectProperty ;
    rdfs:domain msg:Message ;
    rdfs:range msg:Role ;
    rdfs:label "has role"@en ;
    rdfs:comment "The role of the entity sending the message"@en .

msg:hasInterface a owl:ObjectProperty ;
    rdfs:domain msg:Message ;
    rdfs:range msg:Interface ;
    rdfs:label "has interface"@en ;
    rdfs:comment "The interface through which the message was sent"@en .

msg:hasContent a owl:ObjectProperty ;
    rdfs:domain [
        owl:unionOf (
            msg:SystemMessage
            msg:UserMessage
        )
    ] ;
    rdfs:range msg:ContentItem ;
    rdfs:label "has content"@en ;
    rdfs:comment "Links a message to its content items"@en .

msg:hasContentType a owl:ObjectProperty ;
    rdfs:domain msg:ContentItem ;
    rdfs:range msg:ContentType ;
    rdfs:label "has content type"@en ;
    rdfs:comment "The type of the content"@en .

msg:hasToolCall a owl:ObjectProperty ;
    rdfs:domain msg:AssistantMessage ;
    rdfs:range msg:ToolCall ;
    rdfs:label "has tool call"@en ;
    rdfs:comment "Links an assistant message to its tool calls"@en .

msg:respondsTo a owl:ObjectProperty ;
    rdfs:domain msg:ToolMessage ;
    rdfs:range msg:ToolCall ;
    rdfs:label "responds to"@en ;
    rdfs:comment "Links a tool message to the tool call it responds to"@en .

msg:partOf a owl:ObjectProperty ;
    rdfs:domain msg:Message ;
    rdfs:range msg:Conversation ;
    rdfs:label "part of"@en ;
    rdfs:comment "Links a message to its conversation"@en .

# Datatype Properties
msg:messageId a owl:DatatypeProperty ;
    rdfs:domain msg:Message ;
    rdfs:range xsd:string ;
    rdfs:label "message ID"@en ;
    rdfs:comment "Unique identifier for the message"@en .

msg:conversationId a owl:DatatypeProperty ;
    rdfs:domain [
        owl:unionOf (
            msg:Conversation
            msg:Message
        )
    ] ;
    rdfs:range xsd:string ;
    rdfs:label "conversation ID"@en ;
    rdfs:comment "Unique identifier for the conversation"@en .

msg:date a owl:DatatypeProperty ;
    rdfs:domain msg:Message ;
    rdfs:range xsd:dateTime ;
    rdfs:label "date"@en ;
    rdfs:comment "Timestamp when the message was created"@en .

msg:textContent a owl:DatatypeProperty ;
    rdfs:domain [
        owl:unionOf (
            msg:ContentItem
            msg:AssistantMessage
            msg:ToolMessage
        )
    ] ;
    rdfs:range xsd:string ;
    rdfs:label "text content"@en ;
    rdfs:comment "Text content of the message or item"@en .

msg:url a owl:DatatypeProperty ;
    rdfs:domain msg:ContentItem ;
    rdfs:range xsd:string ;
    rdfs:label "URL"@en ;
    rdfs:comment "URL to content (when type is image, audio, video, or file)"@en .

msg:toolCallId a owl:DatatypeProperty ;
    rdfs:domain [
        owl:unionOf (
            msg:ToolCall
            msg:ToolMessage
        )
    ] ;
    rdfs:range xsd:string ;
    rdfs:label "tool call ID"@en ;
    rdfs:comment "Unique identifier for the tool call"@en .

msg:toolName a owl:DatatypeProperty ;
    rdfs:domain [
        owl:unionOf (
            msg:ToolCall
            msg:ToolMessage
        )
    ] ;
    rdfs:range xsd:string ;
    rdfs:label "tool name"@en ;
    rdfs:comment "Name of the tool being called or responding"@en .

msg:toolArgs a owl:DatatypeProperty ;
    rdfs:domain msg:ToolCall ;
    rdfs:range rdf:JSON ;
    rdfs:label "tool arguments"@en ;
    rdfs:comment "Arguments for the tool call"@en .

msg:toolType a owl:DatatypeProperty ;
    rdfs:domain msg:ToolCall ;
    rdfs:range xsd:string ;
    rdfs:label "tool type"@en ;
    rdfs:comment "Type of the tool call"@en . 