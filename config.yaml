# Minimal ABI Core API Configuration
# Loads only essential modules for local development

deploy:
  workspace_id: "96ce7ee7-e5f5-4bca-acf9-9d5d41317f81"
  space_name: "abi-api"
  naas_api_key: "local_dev"
  env:
    NAAS_API_KEY: "local_dev"
    OPENAI_API_KEY: "sk-local"
    ABI_API_KEY: "local_dev"

api:
  title: "ABI API"
  description: "API for ABI, your Agentic Brain Infrastructure"
  logo_path: "assets/logo.png"
  favicon_path: "assets/favicon.ico"
  cors_origins:
    - "http://localhost:9879"
    - "http://localhost:3000"

global_config:
  ai_mode: "local" # Use local Ollama by default

modules:
  # Core ABI module - provides AbiAgent
  - module: naas_abi
    enabled: true
    config:
      datastore_path: "abi"
      workspace_id: "96ce7ee7-e5f5-4bca-acf9-9d5d41317f81"
      storage_name: "abi"
  
  # Required dependency for naas_abi
  - module: naas_abi_core.modules.templatablesparqlquery
    enabled: true
    config: {}
  
  # Required for AbiAgent (uses ChatGPT by default)
  - module: naas_abi_marketplace.ai.chatgpt
    enabled: true
    config:
      openai_api_key: "{{ secret.OPENAI_API_KEY }}"

services:
  secret:
    secret_adapters:
      - adapter: "dotenv"
        config: {}

  triple_store:
    triple_store_adapter:
      adapter: "apache_jena_tdb2"
      config:
        jena_tdb2_url: "http://admin:abi@localhost:3030/ds"
        timeout: 30

  vector_store:
    vector_store_adapter:
      adapter: "qdrant_in_memory"
      config: {}

  object_storage:
    object_storage_adapter:
      adapter: "fs"
      config:
        base_path: ".abi-storage"
