{% raw %}
deploy:
  workspace_id: "{{ secret.WORKSPACE_ID }}"
  space_name: "{% endraw %}{{ project_name }}{% raw %}"
  naas_api_key: "{{ secret.NAAS_API_KEY }}"
  env:
    NAAS_API_KEY: "{{ secret.NAAS_API_KEY }}"
    OPENAI_API_KEY: "{{ secret.OPENAI_API_KEY }}"
    ABI_API_KEY: "{{ secret.ABI_API_KEY }}"

api:
  title: "ABI API"
  description: "API for ABI"
  logo_path: "assets/logo.png"
  favicon_path: "assets/favicon.ico"
  cors_origins:
    - "http://localhost:9879"

global_config:
  ai_mode: "cloud"

modules:
  - module: naas_abi
    enabled: true
    config:
      nexus_config:
        database_url: "postgresql+asyncpg://{{ secret.POSTGRES_USER }}:{{ secret.POSTGRES_PASSWORD }}@{{ secret.POSTGRES_HOST }}:{{ secret.POSTGRES_PORT }}/nexus"
        redis_url: "redis://{{ secret.REDIS_HOST }}:{{ secret.REDIS_PORT }}/0"

  - module: naas_abi_marketplace.ai.chatgpt
    enabled: true
    config:
      openai_api_key: "{{ secret.OPENAI_API_KEY }}"
{% endraw %}
  - module: {{ project_name_snake }}
    enabled: true

default_agent: "{{ project_name_snake }} {{project_name_pascal}}Agent"

{% raw %}
services:
  secret:
    secret_adapters:
      - adapter: "dotenv"
        config: {}
  object_storage:
    object_storage_adapter:
      adapter: "s3"
      config:
        bucket_name: "abi"
        base_prefix: "abi/datastore"
        access_key_id: "{{ secret.MINIO_ROOT_USER }}"
        secret_access_key: "{{ secret.MINIO_ROOT_PASSWORD }}"
        endpoint_url: "http://{{ secret.MINIO_HOST }}:{{ secret.MINIO_PORT }}"
  triple_store:
    triple_store_adapter:
      adapter: "fs"
      config:
        store_path: "storage/triplestore"
  vector_store:
    vector_store_adapter:
      adapter: "qdrant"
      config: {}
  bus:
    bus_adapter:
      adapter: "rabbitmq"
      config:
        rabbitmq_url: "amqp://{{ secret.RABBITMQ_USER }}:{{ secret.RABBITMQ_PASSWORD }}@{{ secret.RABBITMQ_HOST }}:{{ secret.RABBITMQ_PORT }}"
  kv:
    kv_adapter:
      adapter: "redis"
      config:
        redis_url: "redis://{{ secret.REDIS_HOST }}:{{ secret.REDIS_PORT }}"
{% endraw %}
