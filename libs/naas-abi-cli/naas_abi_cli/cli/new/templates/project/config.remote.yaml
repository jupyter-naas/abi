{% raw %}
api:
  title: "ABI API"
  description: "API for ABI"
  logo_path: "assets/logo.png"
  favicon_path: "assets/favicon.ico"
  cors_origins:
    - "http://{{ secret.PUBLIC_WEB_HOST }}"
    - "https://{{ secret.PUBLIC_WEB_HOST }}"
    - "http://{{ secret.PUBLIC_API_HOST }}"
    - "https://{{ secret.PUBLIC_API_HOST }}"

global_config:
  ai_mode: "cloud"

modules:
  - module: naas_abi
    enabled: true
    config:
      nexus_config:
        database_url: "postgresql+asyncpg://{{ secret.POSTGRES_USER }}:{{ secret.POSTGRES_PASSWORD }}@{{ secret.POSTGRES_HOST }}:{{ secret.POSTGRES_PORT }}/nexus"
        redis_url: "redis://{{ secret.REDIS_HOST }}:{{ secret.REDIS_PORT }}/0"

  - module: naas_abi_marketplace.ai.chatgpt
    enabled: true
    config:
      openai_api_key: "{{ secret.OPENAI_API_KEY }}"
{% endraw %}
  - module: {{ project_name_snake }}
    enabled: true

default_agent: "{{ project_name_snake }} {{ project_name_pascal }}Agent"

{% raw %}
services:
  secret:
    secret_adapters:
      - adapter: "dotenv"
        config:
          - path: .env.remote
  object_storage:
    object_storage_adapter:
      adapter: "s3"
      config:
        bucket_name: "abi"
        base_prefix: "abi/datastore"
        access_key_id: "{{ secret.MINIO_ROOT_USER }}"
        secret_access_key: "{{ secret.MINIO_ROOT_PASSWORD }}"
        endpoint_url: "http://{{ secret.MINIO_HOST }}:{{ secret.MINIO_PORT }}"
  triple_store:
    triple_store_adapter:
      adapter: "apache_jena_tdb2"
      config:
        jena_tdb2_url: "http://admin:{{ secret.FUSEKI_ADMIN_PASSWORD }}@{{ secret.FUSEKI_HOST }}:{{ secret.FUSEKI_PORT }}/ds"
  vector_store:
    vector_store_adapter:
      adapter: "qdrant"
      config:
        host: "{{ secret.QDRANT_HOST }}"
        port: "{{ secret.QDRANT_PORT }}"
  bus:
    bus_adapter:
      adapter: "rabbitmq"
      config:
        rabbitmq_url: "amqp://{{ secret.RABBITMQ_USER }}:{{ secret.RABBITMQ_PASSWORD }}@{{ secret.RABBITMQ_HOST }}:{{ secret.RABBITMQ_PORT }}"
  kv:
    kv_adapter:
      adapter: "redis"
      config:
        redis_url: "redis://{{ secret.REDIS_HOST }}:{{ secret.REDIS_PORT }}"
{% endraw %}
