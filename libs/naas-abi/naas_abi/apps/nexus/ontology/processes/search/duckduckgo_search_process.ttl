@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix bfo: <http://purl.obolibrary.org/obo/> .
@prefix nexus: <http://nexus.platform/ontology/> .


# ======================================================================
# DuckDuckGo Search Process
# BFO 7 Buckets Compliant (ISO 21383-2)
# ======================================================================

nexus:duckduckgo_search_process a owl:Ontology ;
    dc:title "DuckDuckGo Search Process"@en ;
    dc:description "A process that searches DuckDuckGo using their Instant Answer API, extracting abstract, related topics, and subtopics with structured result formatting."@en ;
    dc:created "2026-02-09"^^xsd:date ;
    owl:imports <http://ontology.naas.ai/abi/BFO7Buckets> ,
                <http://nexus.platform/ontology/_shared/common_entities> .


# ======================================================================
# WHAT: Process (BFO_0000015)
# ======================================================================

nexus:DuckDuckGoSearchProcess a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000015 ;
    rdfs:label "DuckDuckGo Search Process"@en ;
    skos:definition "A process that searches DuckDuckGo using their Instant Answer API, extracting abstract, related topics, and subtopics with structured result formatting."@en ;
    rdfs:comment "Implements: apps/api/app/api/endpoints/search.py:170-257 search_duckduckgo()" ;
    skos:example "1. Build DuckDuckGo API URL with q, format=json, no_html=1\n2. HTTP GET to api.duckduckgo.com\n3. If AbstractText exists: create result with relevance 1.0\n4. Iterate RelatedTopics: create results with relevance 0.9-0.7\n5. Handle nested Topics arrays (subtopics)\n6. Limit results to requested count\n7. Return list of WebSearchResult"@en .

# ======================================================================
# WHO: Material Entities (BFO_0000040)
# ======================================================================

nexus:DuckDuckGoAPI a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "DuckDuckGoAPI"@en ;
    skos:definition "DuckDuckGo Instant Answer public API"@en .

nexus:SearchClient a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "SearchClient"@en ;
    skos:definition "httpx async client"@en .

# ======================================================================
# WHERE: Sites (BFO_0000029)
# ======================================================================

nexus:DDGEndpoint a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000029 ;
    rdfs:label "DDGEndpoint"@en ;
    skos:definition "https://api.duckduckgo.com/?q={query}&format=json&no_html=1&skip_disambig=1"@en .

# ======================================================================
# WHEN: Temporal Regions (BFO_0000008)
# ======================================================================

nexus:SearchDuration a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000008 ;
    rdfs:label "SearchDuration"@en ;
    skos:definition "200-800ms for DuckDuckGo API response"@en .

# ======================================================================
# HOW WE KNOW: Information Entities (BFO_0000031)
# ======================================================================

nexus:DDGResponse a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;
    rdfs:label "DDGResponse"@en ;
    skos:definition "JSON with AbstractText, AbstractURL, RelatedTopics array, Image"@en .

nexus:RelatedTopic a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;
    rdfs:label "RelatedTopic"@en ;
    skos:definition "Topic with Text, FirstURL, Icon, optional nested Topics array"@en .

# ======================================================================
# HOW IT IS: Qualities (BFO_0000019)
# ======================================================================

nexus:AbstractPriority a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000019 ;
    rdfs:label "AbstractPriority"@en ;
    skos:definition "Quality: abstract gets relevance 1.0, topics get 0.9-0.7"@en .

nexus:NestedTopicSupport a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000019 ;
    rdfs:label "NestedTopicSupport"@en ;
    skos:definition "Quality: handles nested Topics arrays within RelatedTopics"@en .

# ======================================================================
# WHY: Roles (BFO_0000023)
# ======================================================================

nexus:InstantAnswerRole a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000023 ;
    rdfs:label "InstantAnswerRole"@en ;
    skos:definition "Role realized when DDG provides instant answer with abstract"@en .

# ======================================================================
# WHY: Dispositions (BFO_0000016)
# ======================================================================

nexus:HTMLStrippingDisposition a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000016 ;
    rdfs:label "HTMLStrippingDisposition"@en ;
    skos:definition "Disposition to request no_html=1 for clean text results"@en .

# ======================================================================
# Process Relationships (BFO Object Properties)
# ======================================================================

nexus:duckduckgo_search_process_has_duckduckgoapi a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000057 ;
    rdfs:domain nexus:DuckDuckGoSearchProcess ;
    rdfs:range nexus:DuckDuckGoAPI ;
    rdfs:label "DuckDuckGoSearchProcess has participant DuckDuckGoAPI"@en .

nexus:duckduckgo_search_process_occurs_in a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000066 ;
    rdfs:domain nexus:DuckDuckGoSearchProcess ;
    rdfs:range nexus:DDGEndpoint ;
    rdfs:label "DuckDuckGoSearchProcess occurs in DDGEndpoint"@en .

nexus:duckduckgo_search_process_occupies a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000199 ;
    rdfs:domain nexus:DuckDuckGoSearchProcess ;
    rdfs:range nexus:SearchDuration ;
    rdfs:label "DuckDuckGoSearchProcess occupies SearchDuration"@en .

nexus:duckduckgo_search_process_realizes a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000055 ;
    rdfs:domain nexus:DuckDuckGoSearchProcess ;
    rdfs:range nexus:InstantAnswerRole ;
    rdfs:label "DuckDuckGoSearchProcess realizes InstantAnswerRole"@en .

# ======================================================================
# Data Properties
# ======================================================================

nexus:hasAbstract a owl:DatatypeProperty ;
    rdfs:label "hasAbstract"@en ;
    rdfs:range xsd:boolean .

nexus:topicCount a owl:DatatypeProperty ;
    rdfs:label "topicCount"@en ;
    rdfs:range xsd:integer .
