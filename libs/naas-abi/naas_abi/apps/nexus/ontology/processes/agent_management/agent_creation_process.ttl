@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix bfo: <http://purl.obolibrary.org/obo/> .
@prefix nexus: <http://nexus.platform/ontology/> .


# ======================================================================
# Agent Creation Process
# BFO 7 Buckets Compliant (ISO 21383-2)
# ======================================================================

nexus:agent_creation_process a owl:Ontology ;
    dc:title "Agent Creation Process"@en ;
    dc:description "A process that creates a custom AI agent in a workspace with name, system_prompt, model_id, provider, and optional logo_url, persisting to the agent_configs PostgreSQL table."@en ;
    dc:created "2026-02-09"^^xsd:date ;
    owl:imports <http://ontology.naas.ai/abi/BFO7Buckets> ,
                <http://nexus.platform/ontology/_shared/common_entities> .


# ======================================================================
# WHAT: Process (BFO_0000015)
# ======================================================================

nexus:AgentCreationProcess a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000015 ;
    rdfs:label "Agent Creation Process"@en ;
    skos:definition "A process that creates a custom AI agent in a workspace with name, system_prompt, model_id, provider, and optional logo_url, persisting to the agent_configs PostgreSQL table."@en ;
    rdfs:comment "Implements: apps/api/app/api/endpoints/agents.py:168-203 create_agent()" ;
    skos:example "1. Validate workspace access via require_workspace_access(user_id, workspace_id)\n2. Generate UUID for agent ID\n3. Infer provider from model_id using model registry lookup\n4. Look up logo_url from provider logo mapping\n5. Create AgentConfigModel ORM instance\n6. Insert into agent_configs table\n7. Commit transaction\n8. Return AgentConfig response"@en .

# ======================================================================
# WHO: Material Entities (BFO_0000040)
# ======================================================================

nexus:AgentCreator a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "AgentCreator"@en ;
    skos:definition "Authenticated user with workspace access creating the agent"@en .

nexus:AgentConfigStore a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "AgentConfigStore"@en ;
    skos:definition "PostgreSQL agent_configs table storing agent definitions"@en .

# ======================================================================
# WHERE: Sites (BFO_0000029)
# ======================================================================

nexus:AgentsEndpoint a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000029 ;
    rdfs:label "AgentsEndpoint"@en ;
    skos:definition "API endpoint POST /api/agents/"@en .

nexus:AgentConfigsTable a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000029 ;
    rdfs:label "AgentConfigsTable"@en ;
    skos:definition "PostgreSQL table agent_configs with workspace_id FK"@en .

# ======================================================================
# WHEN: Temporal Regions (BFO_0000008)
# ======================================================================

nexus:CreationDuration a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000008 ;
    rdfs:label "CreationDuration"@en ;
    skos:definition "50-100ms for validation and database insert"@en .

# ======================================================================
# HOW WE KNOW: Information Entities (BFO_0000031)
# ======================================================================

nexus:AgentCreateRequest a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;
    rdfs:label "AgentCreateRequest"@en ;
    skos:definition "Pydantic model: name, description, system_prompt, model (default gpt-4), temperature (0.7), max_tokens (4096), workspace_id"@en .

nexus:AgentConfigRecord a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;
    rdfs:label "AgentConfigRecord"@en ;
    skos:definition "Database row: id, workspace_id, name, description, system_prompt, provider, model_id, logo_url, is_default, created_at"@en .

nexus:AgentConfigResponse a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;
    rdfs:label "AgentConfigResponse"@en ;
    skos:definition "API response with full agent configuration"@en .

# ======================================================================
# HOW IT IS: Qualities (BFO_0000019)
# ======================================================================

nexus:AgentNameUniqueness a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000019 ;
    rdfs:label "AgentNameUniqueness"@en ;
    skos:definition "Quality: agent names should be unique within workspace (not enforced)"@en .

nexus:DefaultTemperature a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000019 ;
    rdfs:label "DefaultTemperature"@en ;
    skos:definition "Quality: default temperature of 0.7 for balanced creativity"@en .

# ======================================================================
# WHY: Roles (BFO_0000023)
# ======================================================================

nexus:AgentDesignerRole a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000023 ;
    rdfs:label "AgentDesignerRole"@en ;
    skos:definition "Role realized when user defines agent personality and capabilities"@en .

# ======================================================================
# WHY: Dispositions (BFO_0000016)
# ======================================================================

nexus:ModelRegistryLookupDisposition a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000016 ;
    rdfs:label "ModelRegistryLookupDisposition"@en ;
    skos:definition "Disposition to infer provider from model_id via model registry"@en .

# ======================================================================
# Process Relationships (BFO Object Properties)
# ======================================================================

nexus:agent_creation_process_has_agentcreator a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000057 ;
    rdfs:domain nexus:AgentCreationProcess ;
    rdfs:range nexus:AgentCreator ;
    rdfs:label "AgentCreationProcess has participant AgentCreator"@en .

nexus:agent_creation_process_occurs_in a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000066 ;
    rdfs:domain nexus:AgentCreationProcess ;
    rdfs:range nexus:AgentsEndpoint ;
    rdfs:label "AgentCreationProcess occurs in AgentsEndpoint"@en .

nexus:agent_creation_process_occupies a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000199 ;
    rdfs:domain nexus:AgentCreationProcess ;
    rdfs:range nexus:CreationDuration ;
    rdfs:label "AgentCreationProcess occupies CreationDuration"@en .

nexus:agent_creation_process_realizes a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000055 ;
    rdfs:domain nexus:AgentCreationProcess ;
    rdfs:range nexus:AgentDesignerRole ;
    rdfs:label "AgentCreationProcess realizes AgentDesignerRole"@en .

# ======================================================================
# Data Properties
# ======================================================================

nexus:agentName a owl:DatatypeProperty ;
    rdfs:label "agentName"@en ;
    rdfs:range xsd:string .

nexus:modelId a owl:DatatypeProperty ;
    rdfs:label "modelId"@en ;
    rdfs:range xsd:string .

nexus:temperature a owl:DatatypeProperty ;
    rdfs:label "temperature"@en ;
    rdfs:range xsd:float .

nexus:maxTokens a owl:DatatypeProperty ;
    rdfs:label "maxTokens"@en ;
    rdfs:range xsd:integer .
