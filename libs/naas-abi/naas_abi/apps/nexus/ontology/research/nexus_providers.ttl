@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix bfo: <http://purl.obolibrary.org/obo/> .
@prefix nexus: <http://ontology.naas.ai/nexus/> .

#################################################################
# Ontology Metadata
#################################################################

nexus:ProvidersOntology a owl:Ontology ;
    dc:title "NEXUS AI Providers Ontology"@en ;
    dc:description "BFO-aligned ontology for AI provider streaming protocols and capabilities"@en ;
    dc:creator "NEXUS Platform Team" ;
    dc:date "2026-02-09"^^xsd:date ;
    dc:license <https://creativecommons.org/licenses/by/4.0/> ;
    rdfs:comment "Demonstrates BFO 7 Buckets alignment for heterogeneous AI provider integration"@en ;
    owl:imports <http://ontology.naas.ai/abi/BFO7Buckets.ttl> ;
    owl:versionInfo "1.0" .

#################################################################
# BUCKET 1: Process (WHAT happens) - BFO_0000015
#################################################################

## Core StreamEvent Class
nexus:StreamEvent a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000015 ;  # process
    rdfs:label "Stream Event"@en ;
    skos:definition "A discrete event in an AI streaming response"@en ;
    skos:example "A chunk of text, a tool call, a file attachment"@en .

## Event Type Hierarchy
nexus:ContentEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Content Event"@en ;
    skos:definition "Text content generated by AI model"@en .

nexus:ThinkingEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Thinking Event"@en ;
    skos:definition "Chain-of-thought reasoning process"@en .

nexus:ToolCallEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Tool Call Event"@en ;
    skos:definition "Invocation of external function or tool"@en .

nexus:ToolResultEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Tool Result Event"@en .

nexus:LinkEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Link Event"@en ;
    skos:definition "Hyperlink or URL reference"@en .

nexus:FileEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "File Event"@en ;
    skos:definition "File attachment or download reference"@en .

nexus:ErrorEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Error Event"@en .

nexus:DoneEvent a owl:Class ;
    rdfs:subClassOf nexus:StreamEvent ;
    rdfs:label "Done Event"@en ;
    skos:definition "Signals completion of stream"@en .

#################################################################
# BUCKET 2: Temporal Region (WHEN) - BFO_0000008
#################################################################

nexus:StreamSequence a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000008 ;  # temporal region
    rdfs:label "Stream Sequence"@en ;
    skos:definition "Temporal ordering of streaming events"@en .

nexus:StreamLifecycle a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000008 ;
    rdfs:label "Stream Lifecycle"@en .

nexus:InitiatingPhase a owl:Class ;
    rdfs:subClassOf nexus:StreamLifecycle ;
    rdfs:label "Initiating Phase"@en .

nexus:StreamingPhase a owl:Class ;
    rdfs:subClassOf nexus:StreamLifecycle ;
    rdfs:label "Streaming Phase"@en .

nexus:CompletionPhase a owl:Class ;
    rdfs:subClassOf nexus:StreamLifecycle ;
    rdfs:label "Completion Phase"@en .

## Temporal Properties
nexus:hasEventIndex a owl:DatatypeProperty ;
    rdfs:domain nexus:StreamEvent ;
    rdfs:range xsd:integer ;
    rdfs:label "has event index"@en .

nexus:hasTimestamp a owl:DatatypeProperty ;
    rdfs:domain nexus:StreamEvent ;
    rdfs:range xsd:dateTime ;
    rdfs:label "has timestamp"@en .

#################################################################
# BUCKET 3: Material Entity (WHO) - BFO_0000040
#################################################################

## Provider Classes
nexus:AIProvider a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;  # material entity
    rdfs:label "AI Provider"@en ;
    skos:definition "Organization or service providing AI inference"@en .

nexus:OpenAIProvider a owl:Class ;
    rdfs:subClassOf nexus:AIProvider ;
    rdfs:label "OpenAI Provider"@en .

nexus:AnthropicProvider a owl:Class ;
    rdfs:subClassOf nexus:AIProvider ;
    rdfs:label "Anthropic Provider"@en .

nexus:ABIProvider a owl:Class ;
    rdfs:subClassOf nexus:AIProvider ;
    rdfs:label "ABI/Naas Provider"@en ;
    skos:definition "AI Builder Infrastructure using W3C SSE"@en .

nexus:OllamaProvider a owl:Class ;
    rdfs:subClassOf nexus:AIProvider ;
    rdfs:label "Ollama Provider"@en .

## Model and Agent Classes
nexus:AIModel a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "AI Model"@en .

nexus:AIAgent a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "AI Agent"@en .

nexus:User a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000040 ;
    rdfs:label "User"@en .

#################################################################
# BUCKET 4: Site (WHERE) - BFO_0000029
#################################################################

nexus:APIEndpoint a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000029 ;  # site
    rdfs:label "API Endpoint"@en .

nexus:Workspace a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000029 ;
    rdfs:label "Workspace"@en .

nexus:hasEndpoint a owl:DatatypeProperty ;
    rdfs:domain nexus:AIProvider ;
    rdfs:range xsd:anyURI ;
    rdfs:label "has endpoint"@en .

#################################################################
# BUCKET 5: Generically Dependent Continuant (HOW WE KNOW) - BFO_0000031
#################################################################

## Protocol Classes
nexus:StreamingProtocol a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;  # generically dependent continuant
    rdfs:label "Streaming Protocol"@en ;
    skos:definition "Abstract specification for event transmission"@en .

nexus:ServerSentEvents a owl:Class ;
    rdfs:subClassOf nexus:StreamingProtocol ;
    rdfs:label "Server-Sent Events"@en .

nexus:W3C_SSE a owl:Class ;
    rdfs:subClassOf nexus:ServerSentEvents ;
    rdfs:label "W3C SSE (Strict)"@en ;
    skos:definition "W3C-compliant SSE with multiple data: lines per event"@en ;
    skos:note "Supports multi-line content within single event"@en .

nexus:OpenAI_SSE a owl:Class ;
    rdfs:subClassOf nexus:StreamingProtocol ;
    rdfs:label "OpenAI Pseudo-SSE"@en ;
    skos:definition "Custom JSON-per-line streaming format"@en ;
    skos:note "Not W3C compliant - no event: types, always single-line JSON"@en .

nexus:Anthropic_SSE a owl:Class ;
    rdfs:subClassOf nexus:ServerSentEvents ;
    rdfs:label "Anthropic SSE"@en ;
    skos:definition "W3C SSE with lifecycle events"@en ;
    skos:note "Uses event: types but single data: per event"@en .

## Format Classes
nexus:EventFormat a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000031 ;
    rdfs:label "Event Format"@en .

nexus:JSONFormat a owl:Class ;
    rdfs:subClassOf nexus:EventFormat ;
    rdfs:label "JSON Format"@en .

nexus:PlainTextFormat a owl:Class ;
    rdfs:subClassOf nexus:EventFormat ;
    rdfs:label "Plain Text Format"@en .

#################################################################
# BUCKET 6: Quality (HOW IT IS) - BFO_0000019
#################################################################

nexus:EventProperty a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000019 ;  # quality
    rdfs:label "Event Property"@en .

nexus:Latency a owl:Class ;
    rdfs:subClassOf nexus:EventProperty ;
    rdfs:label "Latency"@en .

nexus:TokenCount a owl:Class ;
    rdfs:subClassOf nexus:EventProperty ;
    rdfs:label "Token Count"@en .

nexus:hasLatencyMs a owl:DatatypeProperty ;
    rdfs:domain nexus:StreamEvent ;
    rdfs:range xsd:float ;
    rdfs:label "has latency (ms)"@en .

nexus:hasTokenCount a owl:DatatypeProperty ;
    rdfs:domain nexus:StreamEvent ;
    rdfs:range xsd:integer ;
    rdfs:label "has token count"@en .

#################################################################
# BUCKET 7: Role & Disposition (WHY) - BFO_0000023 & BFO_0000016
#################################################################

## Roles (Externally-grounded)
nexus:ProviderRole a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000023 ;  # role
    rdfs:label "Provider Role"@en .

nexus:InferenceProvider a owl:Class ;
    rdfs:subClassOf nexus:ProviderRole ;
    rdfs:label "Inference Provider"@en .

nexus:ToolProvider a owl:Class ;
    rdfs:subClassOf nexus:ProviderRole ;
    rdfs:label "Tool Provider"@en .

nexus:MultimodalProvider a owl:Class ;
    rdfs:subClassOf nexus:ProviderRole ;
    rdfs:label "Multimodal Provider"@en .

nexus:AgentRole a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000023 ;
    rdfs:label "Agent Role"@en .

nexus:AssistantRole a owl:Class ;
    rdfs:subClassOf nexus:AgentRole ;
    rdfs:label "Assistant Role"@en .

nexus:OrchestratorRole a owl:Class ;
    rdfs:subClassOf nexus:AgentRole ;
    rdfs:label "Orchestrator Role"@en .

## Dispositions (Internally-grounded)
nexus:StreamingCapability a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000016 ;  # disposition
    rdfs:label "Streaming Capability"@en .

nexus:SSECapability a owl:Class ;
    rdfs:subClassOf nexus:StreamingCapability ;
    rdfs:label "SSE Capability"@en .

nexus:MultiLineDataCapability a owl:Class ;
    rdfs:subClassOf nexus:SSECapability ;
    rdfs:label "Multi-line Data Capability"@en ;
    skos:definition "Can send multiple data: lines per event (W3C SSE)"@en .

nexus:SingleLineDataCapability a owl:Class ;
    rdfs:subClassOf nexus:SSECapability ;
    rdfs:label "Single-line Data Capability"@en ;
    skos:definition "Sends one data: line per event"@en .

nexus:FunctionCallingCapability a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000016 ;
    rdfs:label "Function Calling Capability"@en .

nexus:VisionCapability a owl:Class ;
    rdfs:subClassOf bfo:BFO_0000016 ;
    rdfs:label "Vision Capability"@en .

#################################################################
# Object Properties (Relations)
#################################################################

nexus:implementsProtocol a owl:ObjectProperty ;
    rdfs:domain nexus:AIProvider ;
    rdfs:range nexus:StreamingProtocol ;
    rdfs:label "implements protocol"@en .

nexus:hasCapability a owl:ObjectProperty ;
    rdfs:domain nexus:AIProvider ;
    rdfs:range nexus:StreamingCapability ;
    rdfs:label "has capability"@en .

nexus:hasRole a owl:ObjectProperty ;
    rdfs:subPropertyOf bfo:BFO_0000196 ;  # bearer of
    rdfs:domain nexus:AIProvider ;
    rdfs:range nexus:ProviderRole ;
    rdfs:label "has role"@en .

nexus:providedBy a owl:ObjectProperty ;
    rdfs:domain nexus:AIModel ;
    rdfs:range nexus:AIProvider ;
    rdfs:label "provided by"@en .

nexus:hasModel a owl:ObjectProperty ;
    rdfs:domain nexus:AIAgent ;
    rdfs:range nexus:AIModel ;
    rdfs:label "has model"@en .

nexus:usesFormat a owl:ObjectProperty ;
    rdfs:domain nexus:StreamingProtocol ;
    rdfs:range nexus:EventFormat ;
    rdfs:label "uses format"@en .

#################################################################
# INSTANCES: Concrete Provider Implementations
#################################################################

## OpenAI Provider Instance
nexus:OpenAI a nexus:OpenAIProvider ;
    rdfs:label "OpenAI"@en ;
    nexus:hasEndpoint "https://api.openai.com/v1/chat/completions"^^xsd:anyURI ;
    nexus:implementsProtocol nexus:OpenAI_SSE ;
    nexus:hasCapability nexus:SingleLineDataCapability ;
    nexus:hasCapability nexus:FunctionCallingCapability ;
    nexus:hasCapability nexus:VisionCapability ;
    nexus:hasRole nexus:InferenceProvider ;
    nexus:hasRole nexus:ToolProvider ;
    nexus:hasRole nexus:MultimodalProvider ;
    skos:note "Uses custom JSON-per-line format, not true SSE"@en .

## Anthropic Provider Instance
nexus:Anthropic a nexus:AnthropicProvider ;
    rdfs:label "Anthropic"@en ;
    nexus:hasEndpoint "https://api.anthropic.com/v1/messages"^^xsd:anyURI ;
    nexus:implementsProtocol nexus:Anthropic_SSE ;
    nexus:hasCapability nexus:SingleLineDataCapability ;
    nexus:hasCapability nexus:FunctionCallingCapability ;
    nexus:hasCapability nexus:VisionCapability ;
    nexus:hasRole nexus:InferenceProvider ;
    nexus:hasRole nexus:ToolProvider ;
    nexus:hasRole nexus:MultimodalProvider ;
    skos:note "Best practices SSE: uses event: types with lifecycle events"@en .

## ABI/Naas Provider Instance
nexus:ABIForvisMazars a nexus:ABIProvider ;
    rdfs:label "ABI Forvis Mazars"@en ;
    nexus:hasEndpoint "https://abi-forvismazars.default.space.naas.ai"^^xsd:anyURI ;
    nexus:implementsProtocol nexus:W3C_SSE ;
    nexus:hasCapability nexus:MultiLineDataCapability ;
    nexus:hasRole nexus:InferenceProvider ;
    skos:note "Strictly W3C compliant: multiple data: lines per event"@en ;
    skos:example "Sends links as separate data: lines within same event"@en .

## Ollama Provider Instance
nexus:Ollama a nexus:OllamaProvider ;
    rdfs:label "Ollama"@en ;
    nexus:hasEndpoint "http://localhost:11434/api/chat"^^xsd:anyURI ;
    nexus:implementsProtocol nexus:OpenAI_SSE ;
    nexus:hasCapability nexus:SingleLineDataCapability ;
    nexus:hasRole nexus:InferenceProvider ;
    skos:note "Local inference, OpenAI-compatible API"@en .

#################################################################
# INSTANCES: Concrete Models
#################################################################

nexus:GPT4o a nexus:AIModel ;
    rdfs:label "GPT-4o"@en ;
    nexus:providedBy nexus:OpenAI ;
    skos:definition "OpenAI's multimodal flagship model"@en .

nexus:ClaudeOpus a nexus:AIModel ;
    rdfs:label "Claude Opus 4.6"@en ;
    nexus:providedBy nexus:Anthropic ;
    skos:definition "Anthropic's most capable model"@en .

nexus:ForvisMazarsCorporate a nexus:AIModel ;
    rdfs:label "ForvisMazars Corporate Agent"@en ;
    nexus:providedBy nexus:ABIForvisMazars ;
    skos:definition "Specialized agent for corporate data analysis"@en .

nexus:BOB a nexus:AIModel ;
    rdfs:label "BOB - Orchestrator"@en ;
    nexus:providedBy nexus:ABIForvisMazars ;
    skos:definition "Master orchestrator agent for Forvis Mazars workspace"@en .

#################################################################
# INSTANCES: Example Agents
#################################################################

nexus:AgentAIA a nexus:AIAgent ;
    rdfs:label "AIA - Personal Assistant"@en ;
    nexus:hasModel nexus:GPT4o ;
    nexus:hasRole nexus:AssistantRole .

nexus:AgentBOB a nexus:AIAgent ;
    rdfs:label "BOB - Forvis Mazars Orchestrator"@en ;
    nexus:hasModel nexus:BOB ;
    nexus:hasRole nexus:OrchestratorRole .

#################################################################
# INSTANCES: Example Streaming Events
#################################################################

## Example: OpenAI Content Event
nexus:Event001 a nexus:ContentEvent ;
    rdfs:label "GPT-4o content chunk"@en ;
    nexus:hasEventIndex 1 ;
    nexus:hasTimestamp "2026-02-09T12:34:56Z"^^xsd:dateTime ;
    nexus:hasTokenCount 5 ;
    nexus:hasLatencyMs 120.5 ;
    bfo:BFO_0000057 nexus:AgentAIA ;  # has participant
    skos:example "Content: 'Hello! How can I help you today?'"@en .

## Example: ABI Link Event (Multi-line data:)
nexus:Event002 a nexus:LinkEvent ;
    rdfs:label "ABI link reference"@en ;
    nexus:hasEventIndex 1 ;
    nexus:hasTimestamp "2026-02-09T13:45:12Z"^^xsd:dateTime ;
    bfo:BFO_0000057 nexus:AgentBOB ;
    skos:example "Content: 'Vous pouvez accéder à la présentation via ce lien : https://...' (sent as multiple data: lines)"@en ;
    skos:note "This event required multiple data: lines in W3C SSE format"@en .

## Example: Anthropic Tool Call Event
nexus:Event003 a nexus:ToolCallEvent ;
    rdfs:label "Claude function call"@en ;
    nexus:hasEventIndex 2 ;
    nexus:hasTimestamp "2026-02-09T14:22:33Z"^^xsd:dateTime ;
    skos:example "Tool: get_weather, Args: {location: 'Paris'}"@en .

#################################################################
# SPARQL Query Examples (as comments)
#################################################################

# Query 1: Find all providers with W3C SSE support
# SELECT ?provider WHERE {
#     ?provider nexus:implementsProtocol nexus:W3C_SSE .
# }
# Result: nexus:ABIForvisMazars

# Query 2: Find providers with function calling capability
# SELECT ?provider WHERE {
#     ?provider nexus:hasCapability nexus:FunctionCallingCapability .
# }
# Result: nexus:OpenAI, nexus:Anthropic

# Query 3: Find providers requiring multi-line data: parsing
# SELECT ?provider WHERE {
#     ?provider nexus:hasCapability nexus:MultiLineDataCapability .
# }
# Result: nexus:ABIForvisMazars

# Query 4: Find all models from a specific provider
# SELECT ?model WHERE {
#     ?model nexus:providedBy nexus:ABIForvisMazars .
# }
# Result: nexus:ForvisMazarsCorporate, nexus:BOB

# Query 5: Find agents with orchestrator role
# SELECT ?agent WHERE {
#     ?agent nexus:hasRole nexus:OrchestratorRole .
# }
# Result: nexus:AgentBOB

# Query 6: Validate provider protocol compliance
# ASK {
#     nexus:OpenAI nexus:implementsProtocol nexus:W3C_SSE .
# }
# Result: false (OpenAI uses custom format)

# Query 7: Find all multimodal providers
# SELECT ?provider WHERE {
#     ?provider nexus:hasRole nexus:MultimodalProvider .
# }
# Result: nexus:OpenAI, nexus:Anthropic

# Query 8: Check if provider supports vision
# ASK {
#     nexus:ABIForvisMazars nexus:hasCapability nexus:VisionCapability .
# }
# Result: false (ABI doesn't have vision capability)
