# Configure storage for artifacts generated by Dagster runs.
local_artifact_storage:
  module: dagster._core.storage.root
  class: LocalArtifactStorage
  config:
    base_dir: /app/.dagster/storage

# Persist all Dagster metadata in the shared PostgreSQL service.
storage:
  postgres:
    postgres_db:
      hostname:
        env: DAGSTER_PG_HOSTNAME
      username:
        env: DAGSTER_PG_USERNAME
      password:
        env: DAGSTER_PG_PASSWORD
      db_name:
        env: DAGSTER_PG_DB
      port: 5432

# Store compute logs in MinIO (S3-compatible) for centralized access.
compute_logs:
  module: dagster_aws.s3.compute_log_manager
  class: S3ComputeLogManager
  config:
    bucket:
      env: DAGSTER_S3_LOG_BUCKET
    prefix: dagster/compute_logs
    endpoint_url:
      env: MINIO_ENDPOINT_URL
    region:
      env: MINIO_REGION_NAME
    use_ssl: false
    verify: false

# Disable telemetry by default; enable manually if desired.
telemetry:
  enabled: false

